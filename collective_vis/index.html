<html lang="en-GB" class=" grunticon js svg"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    COVID-19 effects on the poorest 20% of people worldwide
  </title>



<link href="https://devinit.org/assets/css/screen.min.600391bdde7f.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" rel="stylesheet">
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script>/*! grunt-grunticon Stylesheet Loader - v2.1.6 | https://github.com/filamentgroup/grunticon | (c) 2015 Scott Jehl, Filament Group, Inc. | MIT license. */
!function(){function e(e,n,t){"use strict";var o=window.document.createElement("link"),r=n||window.document.getElementsByTagName("script")[0],a=window.document.styleSheets;return o.rel="stylesheet",o.href=e,o.media="only x",r.parentNode.insertBefore(o,r),o.onloadcssdefined=function(e){for(var n,t=0;t<a.length;t++)a[t].href&&a[t].href===o.href&&(n=!0);n?e():setTimeout(function(){o.onloadcssdefined(e)})},o.onloadcssdefined(function(){o.media=t||"all"}),o}function n(e,n){e.onload=function(){e.onload=null,n&&n.call(e)},"isApplicationInstalled"in navigator&&"onloadcssdefined"in e&&e.onloadcssdefined(n)}!function(t){var o=function(r,a){"use strict";if(r&&3===r.length){var i=t.navigator,c=t.document,s=t.Image,d=!(!c.createElementNS||!c.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!c.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||t.opera&&-1===i.userAgent.indexOf("Chrome")||-1!==i.userAgent.indexOf("Series40")),l=new s;l.onerror=function(){o.method="png",o.href=r[2],e(r[2])},l.onload=function(){var t=1===l.width&&1===l.height,i=r[t&&d?0:t?1:2];t&&d?o.method="svg":t?o.method="datapng":o.method="png",o.href=i,n(e(i),a)},l.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",c.documentElement.className+=" grunticon"}};o.loadCSS=e,o.onloadCSS=n,t.grunticon=o}(this),function(e,n){"use strict";var t=n.document,o="grunticon:",r=function(e){if(t.attachEvent?"complete"===t.readyState:"loading"!==t.readyState)e();else{var n=!1;t.addEventListener("readystatechange",function(){n||(n=!0,e())},!1)}},a=function(e){return n.document.querySelector('link[href$="'+e+'"]')},i=function(e){var n,t,r,a,i,c,s={};if(n=e.sheet,!n)return s;t=n.cssRules?n.cssRules:n.rules;for(var d=0;d<t.length;d++)r=t[d].cssText,a=o+t[d].selectorText,i=r.split(");")[0].match(/US\-ASCII\,([^"']+)/),i&&i[1]&&(c=decodeURIComponent(i[1]),s[a]=c);return s},c=function(e){var n,r,a,i;a="data-grunticon-embed";for(var c in e){i=c.slice(o.length);try{n=t.querySelectorAll(i)}catch(s){continue}r=[];for(var d=0;d<n.length;d++)null!==n[d].getAttribute(a)&&r.push(n[d]);if(r.length)for(d=0;d<r.length;d++)r[d].innerHTML=e[c],r[d].style.backgroundImage="none",r[d].removeAttribute(a)}return r},s=function(n){"svg"===e.method&&r(function(){c(i(a(e.href))),"function"==typeof n&&n()})};e.embedIcons=c,e.getCSS=a,e.getIcons=i,e.ready=r,e.svgLoadedCallback=s,e.embedSVG=s}(grunticon,this)}();
	grunticon(["https://devinit.org/assets/icons/ico.data.svg.5b91ad25605f.css", "https://devinit.org/assets/icons/ico.data.png.f32b31c4bf32.css", "https://devinit.org/assets/icons/ico.fallback.4e2c768f487b.css"]);
</script>
<noscript><link href="https://devinit.org/assets/icons/ico.fallback.4e2c768f487b.css" rel="stylesheet"></noscript>
<script src="https://devinit.org/assets/js/libs/modernizr.30c0023fa2cd.js"></script>


<link rel="icon" type="image/png" href="https://devinit.org/assets/favicons/favicon.85ce05716b7b.png" sizes="16x16">

<link href="https://devinit.org/assets/css/di_website.cebbdc3a54c7.css" rel="stylesheet">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="COVID-19 effects on the poorest 20% of people worldwide — Development Initiatives">
<meta name="twitter:description" content="COVID-19 effects on the poorest 20% of people worldwide">
<meta name="twitter:image" content="https://devinit.org/media/images/Hero_image_Community_Case_Management_in_Banglad.original.jpg">



<meta property="og:title" content="COVID-19 effects on the poorest 20% of people worldwide">
<meta property="og:description" content="COVID-19 effects on the poorest 20% of people worldwide">
<meta property="og:site_name" content="Development Initiatives">
<meta property="og:image" content="https://devinit.org/media/images/Hero_image_Community_Case_Management_in_Banglad.original.jpg">



<meta itemprop="name" content="COVID-19 effects on the poorest 20% of people worldwide — Development Initiatives">
<meta itemprop="description" content="COVID-19 effects on the poorest 20% of people worldwide">
<meta itemprop="image" content="https://devinit.org/media/images/Hero_image_Community_Case_Management_in_Banglad.original.jpg">

<meta name="description" content="COVID-19 effects on the poorest 20% of people worldwide">




</head>
<body class="body body-- body--sunflower" id="body-">

  <div class="ui-base">
    <a href="#pagecontent" class="skiplink" data-js="skiplink">Skip to main content</a>




<header role="banner" class="header">
	<div class="row">
		<a href="https://devinit.org/" class="branding">Development Initiatives</a>


<button role="button" class="navigation-primary-toggle" id="navigation-primary-toggle"><span>Menu</span></button>

<nav class="navigation-primary" role="navigation" id="navigation-primary">
	<ul class="navigation-primary__items">

			<li class="navigation-primary__item ">
				<a href="https://devinit.org/who-we-are/?nav=header">Who we are</a>
			</li>

			<li class="navigation-primary__item ">
				<a href="https://devinit.org/what-we-do/?nav=header">What we do</a>
			</li>

			<li class="navigation-primary__item ">
				<a href="https://devinit.org/how-we-work/?nav=header">How we work</a>
			</li>

			<li class="navigation-primary__item navigation-primary__item--active">
				<a href="https://devinit.org/resources/?nav=header">Resources</a>
			</li>

			<li class="navigation-primary__item ">
				<a href="https://devinit.org/data/?nav=header">Data</a>
			</li>

			<li class="navigation-primary__item ">
				<a href="https://devinit.org/blog/?nav=header">Blog</a>
			</li>

			<li class="navigation-primary__item ">
				<a href="https://devinit.org/work-for-us/?nav=header">Work for us</a>
			</li>

	</ul>
</nav>

	</div>
</header>


    <!-- ID and -nofocus required for proper skiplink operation -->
    <main id="pagecontent" class="pagecontent -nofocus" role="main" tabindex="-1">




<section class="hero hero--image">

    <div class="hero__image" id="ri9bb2b9"><style scoped="">
            @media all and (min-width: 1px) {
                #ri9bb2b9 {
                    background-image: url(https://devinit.org/media/images/Hero_image_Community_Case_Man.8c3fb3aa.fill-400x300-c100.jpg);
                    background-image: -webkit-image-set(url("https://devinit.org/media/images/Hero_image_Community_Case_Man.8c3fb3aa.fill-400x300-c100.jpg") 1x, url("https://devinit.org/media/images/Hero_image_Community_Case_Manageme.8c3fb3aa.fill-800x600.jpg") 2x);
                    background-image: image-set(url("https://devinit.org/media/images/Hero_image_Community_Case_Man.8c3fb3aa.fill-400x300-c100.jpg") 1x, url("https://devinit.org/media/images/Hero_image_Community_Case_Manageme.8c3fb3aa.fill-800x600.jpg") 2x);
                    background-position-y: center;
                }
            }


            @media all and (min-width: 400px) {
                #ri9bb2b9 {
                    background-image: url(https://devinit.org/media/images/Hero_image_Community_Case_Man.8c3fb3aa.fill-500x280-c100.jpg);
                    background-image: -webkit-image-set(url("https://devinit.org/media/images/Hero_image_Community_Case_Man.8c3fb3aa.fill-500x280-c100.jpg") 1x, url("https://devinit.org/media/images/Hero_image_Community_Case_Managem.8c3fb3aa.fill-1000x560.jpg") 2x);
                    background-image: image-set(url("https://devinit.org/media/images/Hero_image_Community_Case_Man.8c3fb3aa.fill-500x280-c100.jpg") 1x, url("https://devinit.org/media/images/Hero_image_Community_Case_Managem.8c3fb3aa.fill-1000x560.jpg") 2x);
                    background-position-y: center;
                }
            }


            @media all and (min-width: 500px) {
                #ri9bb2b9 {
                    background-image: url(https://devinit.org/media/images/Hero_image_Community_Case_Man.8c3fb3aa.fill-780x230-c100.jpg);
                    background-image: -webkit-image-set(url("https://devinit.org/media/images/Hero_image_Community_Case_Man.8c3fb3aa.fill-780x230-c100.jpg") 1x, url("https://devinit.org/media/images/Hero_image_Community_Case_Managem.8c3fb3aa.fill-1560x460.jpg") 2x);
                    background-image: image-set(url("https://devinit.org/media/images/Hero_image_Community_Case_Man.8c3fb3aa.fill-780x230-c100.jpg") 1x, url("https://devinit.org/media/images/Hero_image_Community_Case_Managem.8c3fb3aa.fill-1560x460.jpg") 2x);
                    background-position-y: center;
                }
            }


            @media all and (min-width: 780px) {
                #ri9bb2b9 {
                    background-image: url(https://devinit.org/media/images/Hero_image_Community_Case_Ma.8c3fb3aa.fill-1000x435-c100.jpg);
                    background-image: -webkit-image-set(url("https://devinit.org/media/images/Hero_image_Community_Case_Ma.8c3fb3aa.fill-1000x435-c100.jpg") 1x, url("https://devinit.org/media/images/Hero_image_Community_Case_Managem.8c3fb3aa.fill-2000x870.jpg") 2x);
                    background-image: image-set(url("https://devinit.org/media/images/Hero_image_Community_Case_Ma.8c3fb3aa.fill-1000x435-c100.jpg") 1x, url("https://devinit.org/media/images/Hero_image_Community_Case_Managem.8c3fb3aa.fill-2000x870.jpg") 2x);
                    background-position-y: center;
                }
            }


            @media all and (min-width: 1000px) {
                #ri9bb2b9 {
                    background-image: url(https://devinit.org/media/images/Hero_image_Community_Case_Ma.8c3fb3aa.fill-1350x435-c100.jpg);
                    background-image: -webkit-image-set(url("https://devinit.org/media/images/Hero_image_Community_Case_Ma.8c3fb3aa.fill-1350x435-c100.jpg") 1x, url("https://devinit.org/media/images/Hero_image_Community_Case_Managem.8c3fb3aa.fill-2700x870.jpg") 2x);
                    background-image: image-set(url("https://devinit.org/media/images/Hero_image_Community_Case_Ma.8c3fb3aa.fill-1350x435-c100.jpg") 1x, url("https://devinit.org/media/images/Hero_image_Community_Case_Managem.8c3fb3aa.fill-2700x870.jpg") 2x);
                    background-position-y: center;
                }
            }


            @media all and (min-width: 1350px) {
                #ri9bb2b9 {
                    background-image: url(https://devinit.org/media/images/Hero_image_Community_Case_Ma.8c3fb3aa.fill-1800x430-c100.jpg);
                    background-image: -webkit-image-set(url("https://devinit.org/media/images/Hero_image_Community_Case_Ma.8c3fb3aa.fill-1800x430-c100.jpg") 1x, url("https://devinit.org/media/images/Hero_image_Community_Case_Managem.8c3fb3aa.fill-3600x860.jpg") 2x);
                    background-image: image-set(url("https://devinit.org/media/images/Hero_image_Community_Case_Ma.8c3fb3aa.fill-1800x430-c100.jpg") 1x, url("https://devinit.org/media/images/Hero_image_Community_Case_Managem.8c3fb3aa.fill-3600x860.jpg") 2x);
                    background-position-y: center;
                }
            }

        </style></div>

      <span class="hero__credit">Image by

          <a href="http://www.flickr.com/photos/savethechildrenusa/5634621403/" target="_blank">Save the Children</a>

      </span>



  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <div class="row row--narrow">
    <div class="hero__content">
      <ul class="hero__meta">

          <li class="hero__meta-item hero__meta-item--block">Factsheet</li>


          <li class="hero__meta-item">18 September 2020</li>

      </ul>


      <h1 class="hero__title">
        <span>COVID-19 effects on the poorest 20% of people worldwide</span>
      </h1>

    </div>
  </div>
</section>



    <section class="section section--large">
      <div class="row row--narrow">


            <div class="max-meter max-meter--center">


<div class="m-authors">
    <h3 class="m-authors__title">

        Authors

    </h3>
    <p class="m-authors__copy">




            <a href="https://devinit.org/who-we-are/our-team/zach-christensen/?referrer=author">
              Zach Christensen
            </a>




    </p>
</div>


            </div>








<div class="section-chapter" id="section-1-1">
    <div class="max-meter max-meter--center">
        <!-- <span class="section-chapter__number">1.1</span> -->
        <a href="#section-1-1" data-id="section-1-1" data-js="share-section-trigger" class="section-chapter__link"><i role="presentation" aria-hidden="true" class="ico ico--16 ico-link-sunflower"></i>
Share section</a>


<div class="share__wrapper" data-js="share-section" data-id="section-1-1" aria-hidden="true">

        <ul class="share__media">
            <li class="share__item">
                <a class="js-social-share" data-event-label="Share section with Facebook / Introduction / https://devinit.org/2b4b7e#section-1-1" data-event-category="Share" href="https://www.facebook.com/sharer/sharer.php?u=https%3A//devinit.org/2b4b7e%23section-1-1" target="_blank"><img src="https://devinit.org/assets/svg/source/facebook.9d990725fab2.svg" alt="Share with Facebook"></a>
            </li>
            <li class="share__item">
                <a class="js-social-share" data-event-label="Share section  with Twitter / Introduction / https://devinit.org/2b4b7e#section-1-1" data-event-category="Share" href="https://twitter.com/intent/tweet/?text=Introduction&amp;url=https%3A//devinit.org/2b4b7e%23section-1-1" target="_blank"><img src="https://devinit.org/assets/svg/source/twitter.a5f3564d3e87.svg" alt="Share with Twitter"></a>
            </li>
            <li class="share__item">
                <a class="js-social-share" data-event-label="Share section  with LinkedIn / Introduction / https://devinit.org/2b4b7e#section-1-1" data-event-category="Share" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A//devinit.org/2b4b7e%23section-1-1&amp;title=Introduction" target="_blank"><img src="https://devinit.org/assets/svg/source/linkedin.185123306969.svg" alt="Share with LinkedIn"></a>
            </li>
        </ul>

    <div class="share__copy ">
        <input readonly="" class="js-copy-field" type="text" value="https://devinit.org/2b4b7e#section-1-1" title="Short URL for sharing">
        <button class="button js-copy-trigger">Copy</button>
    </div>
</div>

        <h2 class="section-chapter__heading">Introduction</h2>
    </div>
</div>


      </div>
    </section>

    <section class="section section--large">
      <div class="row row--narrow">
        <div class="max-meter max-meter--center">
          <div class="is-typeset wysiwyg ">
            <p>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin massa eros, pellentesque et auctor ac, porta et libero. Maecenas tristique sapien in orci venenatis molestie. Etiam ullamcorper elit diam, vitae laoreet nisi laoreet nec. Ut consequat rutrum congue. Nulla eget condimentum turpis. Pellentesque aliquet suscipit mauris vel rutrum. Nullam ut venenatis metus. Etiam ut fringilla leo. Nulla in libero justo. Etiam mollis commodo sem, a efficitur eros blandit gravida. Ut quis fringilla mauris. In lobortis aliquam mauris at mollis. Maecenas lectus purus, rhoncus non erat id, malesuada tincidunt leo. Proin feugiat, magna eget feugiat maximus, nisi eros feugiat sem, eu scelerisque velit risus sit amet purus. Vivamus est urna, scelerisque non rhoncus quis, dapibus vel massa.
            </p>
          </div>
        </div>
      </div>
    </section>
    <section class="section section--large">
      <div class="row row--narrow">
        <div class="max-meter max-meter--center responsive-graph">
          <h3 class="type-l type-l--trailer">Figure 1: How has COVID-19 affected the percentage of people in poverty?</h3>
            <div class="chart-container chart-container--full js-plotly-chart-wrapper">
              <select class="data-selector js-plotly-chart-data-selector data-selector--active" id="countrySelectCovid1" style="position:relative;float:left;"></select>
              <select class="data-selector js-plotly-chart-data-selector data-selector--active" id="indicatorSelectCovid1" style="position:relative;float:left;"></select>
              <div class="charts__chart js-plotly-chart js-plotly-plot">
                <div class="plot-container plotly">
                  <div class="svg-container" style="position: relative; width: 100%;" id="covid-chart1"></div>
                </div>
              </div>
            </div>
          <div class="chart-fallback">
            <a href="https://devinit.org/media/images/20_contributors_of_the_largest_amounts_of_int.width-1400.png" target="_blank" title="Click to open image in a new window">
                <span class="chart-fallback__no-js-small-screen-image" style="background-image: url('https://devinit.org//media/images/20_contributors_of_the_largest_amounts_of_int.width-1000.png'); padding-top: 43.8%;"></span>
            </a>
          </div>
          <div class="chart-fallback__alert">
            <p>To view this interactive visualisation make sure JavaScript is available on your device.</p>
          </div>
          <div class="chart-fallback__alert chart-fallback__alert--ss">
            <p>To view this interactive visualisation use a device with a larger screen.</p>
          </div>
          <figcaption class="media-caption">
            <p>Source: Development Initiatives based on World Bank and DHS/MICS surveys.</p>
          </figcaption>
        </div>
      </div>
    </section>
    <section class="section section--large">
      <div class="row row--narrow">
        <div class="max-meter max-meter--center">
          <div class="is-typeset wysiwyg ">
            <p>
              Mauris finibus, purus nec finibus finibus, ligula odio mollis lectus, eu condimentum ante libero ut mi. Nullam interdum felis eget sem accumsan, quis interdum lectus interdum. Nullam mattis molestie pulvinar. Integer ut ligula fringilla, egestas purus eu, condimentum mauris. Donec fermentum mi ac tortor sagittis, eget finibus massa ullamcorper. Cras vel elit et metus vestibulum tempus et sit amet metus. Interdum et malesuada fames ac ante ipsum primis in faucibus. Donec eu nisl ac lacus sollicitudin hendrerit quis id dui. Integer vehicula tortor ut lorem laoreet scelerisque. Sed eget mattis ex, vel sollicitudin justo. Phasellus nec finibus arcu, at tempor erat. Vestibulum sodales, turpis in pretium elementum, sapien elit sodales est, nec faucibus eros felis quis massa.
            </p>
            <p>
              Aenean non ipsum at quam dictum laoreet vel ac purus. In in orci porttitor, varius purus non, volutpat nunc. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin eu nisl vel magna dignissim luctus. Donec feugiat vulputate interdum. Sed ullamcorper vitae libero eget tincidunt. Suspendisse at ligula nec odio condimentum auctor quis id lectus. Cras scelerisque dui posuere fermentum elementum. Pellentesque arcu est, rutrum ut mauris vel, mollis finibus arcu. Morbi quis aliquam erat. Pellentesque mollis non quam nec ullamcorper. Vivamus arcu dolor, ullamcorper in scelerisque eu, consectetur eget sapien. Praesent in leo et velit efficitur facilisis nec quis neque. In mollis sem eget suscipit eleifend. Curabitur vestibulum quam ut enim sollicitudin consectetur.
            </p>
          </div>
        </div>
      </div>
    </section>
    <section class="section section--large">
      <div class="row row--narrow">
        <div class="max-meter max-meter--center responsive-graph">
          <h3 class="type-l type-l--trailer">Figure 2: How has COVID-19 affected the gap between the richest and the poorest?</h3>
            <div class="chart-container chart-container--full js-plotly-chart-wrapper">
              <select class="data-selector js-plotly-chart-data-selector data-selector--active" id="countrySelectCovid2" style="position:relative;float:left;"></select>
              <select class="data-selector js-plotly-chart-data-selector data-selector--active" id="indicatorSelectCovid2" style="position:relative;float:left;">
                <option value="nominal">Nominal 2011 PPP</option>
                <option value="percent">Percentage change</option>
              </select>
              <div class="charts__chart js-plotly-chart js-plotly-plot">
                <div class="plot-container plotly">
                  <div class="svg-container" style="position: relative; width: 100%;" id="covid-chart2"></div>
                </div>
              </div>
            </div>
          <div class="chart-fallback">
            <a href="https://devinit.org/media/images/20_contributors_of_the_largest_amounts_of_int.width-1400.png" target="_blank" title="Click to open image in a new window">
                <span class="chart-fallback__no-js-small-screen-image" style="background-image: url('https://devinit.org//media/images/20_contributors_of_the_largest_amounts_of_int.width-1000.png'); padding-top: 43.8%;"></span>
            </a>
          </div>
          <div class="chart-fallback__alert">
            <p>To view this interactive visualisation make sure JavaScript is available on your device.</p>
          </div>
          <div class="chart-fallback__alert chart-fallback__alert--ss">
            <p>To view this interactive visualisation use a device with a larger screen.</p>
          </div>
          <figcaption class="media-caption">
            <p>Source: Development Initiatives based on World Bank and DHS/MICS surveys.</p>
          </figcaption>
        </div>
      </div>
    </section>
    <section class="section section--large">
      <div class="row row--narrow">
        <div class="max-meter max-meter--center">
          <div class="is-typeset wysiwyg ">
            <p>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin massa eros, pellentesque et auctor ac, porta et libero. Maecenas tristique sapien in orci venenatis molestie. Etiam ullamcorper elit diam, vitae laoreet nisi laoreet nec. Ut consequat rutrum congue. Nulla eget condimentum turpis. Pellentesque aliquet suscipit mauris vel rutrum. Nullam ut venenatis metus. Etiam ut fringilla leo. Nulla in libero justo. Etiam mollis commodo sem, a efficitur eros blandit gravida. Ut quis fringilla mauris. In lobortis aliquam mauris at mollis. Maecenas lectus purus, rhoncus non erat id, malesuada tincidunt leo. Proin feugiat, magna eget feugiat maximus, nisi eros feugiat sem, eu scelerisque velit risus sit amet purus. Vivamus est urna, scelerisque non rhoncus quis, dapibus vel massa.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section class="section section--large">
      <div class="row row--narrow">
        <div class="max-meter max-meter--center responsive-graph">
          <h3 class="type-l type-l--trailer">Figure 3: Why are people in poverty more vulnerable to pandemics?</h3>
            <div class="chart-container chart-container--full js-plotly-chart-wrapper">
              <select class="data-selector js-plotly-chart-data-selector data-selector--active" id="countrySelectCovid3" style="position:relative;float:left;"></select>
              <select class="data-selector js-plotly-chart-data-selector data-selector--active" id="indicatorSelectCovid3" style="position:relative;float:left;"></select>
              <select class="data-selector js-plotly-chart-data-selector data-selector--active" id="demographicSelectCovid3" style="position:relative;float:left;"></select>
              <div class="charts__chart js-plotly-chart js-plotly-plot">
                <div class="plot-container plotly">
                  <div class="svg-container" style="position: relative; width: 100%;" id="covid-chart3"></div>
                </div>
              </div>
            </div>
          <div class="chart-fallback">
            <a href="https://devinit.org/media/images/20_contributors_of_the_largest_amounts_of_int.width-1400.png" target="_blank" title="Click to open image in a new window">
                <span class="chart-fallback__no-js-small-screen-image" style="background-image: url('https://devinit.org//media/images/20_contributors_of_the_largest_amounts_of_int.width-1000.png'); padding-top: 43.8%;"></span>
            </a>
          </div>
          <div class="chart-fallback__alert">
            <p>To view this interactive visualisation make sure JavaScript is available on your device.</p>
          </div>
          <div class="chart-fallback__alert chart-fallback__alert--ss">
            <p>To view this interactive visualisation use a device with a larger screen.</p>
          </div>
          <figcaption class="media-caption">
            <p>Source: Development Initiatives based on World Bank and DHS/MICS surveys.</p>
          </figcaption>
        </div>
      </div>
    </section>
    <script>
    // Start chart 1
    var currentSelection1 = [];
    var currentIndicator1 = "Extreme poverty";

    // set the dimensions and margins of the graph
    var margin1 = {top: 10, right: 330, bottom: 30, left: 60},
        width1 = 800 - margin1.left - margin1.right,
        height1 = 300 - margin1.top - margin1.bottom;

    // append the svg object to the body of the page
    var svg1 = d3.select("#covid-chart1")
      .append("svg")
        .attr('preserveAspectRatio', 'xMinYMin meet')
        .attr("viewBox", "0 0 " + (width1 + margin1.left + margin1.right) + " " + (height1 + margin1.top + margin1.bottom))
        .attr("style","background-color: white;")
      .append("g")
        .attr("transform",
              "translate(" + margin1.left + "," + margin1.top + ")");


    //Read the data
    d3.csv("../covid-projections/covid_proj.csv", function(original_data) {

        var allCountries = d3.map(original_data, function(d){return(d.name)}).keys();
        var allIndicator = d3.map(original_data, function(d){return(d.povtype)}).keys();
        var allPPP = d3.map(original_data, function(d){return(d.ppp)}).keys();

        data = original_data.filter(function(d){return d.povtype == currentIndicator1});

        // add the options to the button
        d3.select("#countrySelectCovid1")
          .selectAll('myOptions')
         	.data(allCountries)
          .enter()
        	.append('option')
          .text(function (d) { return d; }) // text showed in the menu
          .attr("value", function (d) { return d; }) // corresponding value returned by the buttons

        d3.select("#indicatorSelectCovid1")
          .selectAll('myOptions')
         	.data(allIndicator)
          .enter()
        	.append('option')
          .text(function (d) { return "Indicator: "+d; }) // text showed in the menu
          .attr("value", function (d) { return d; }) // corresponding value returned by the buttons

        // A color scale: one color for each group
        var myColor = d3.scaleOrdinal()
          .range(["#e84439", "#eb642b", "#f49b21", "#c2135b", "#893f90", "#0089cc", "#109e68"]);

        // Add X axis
        var x = d3.scaleLinear()
          .domain(d3.extent(data, function(d) { return d.year; }))
          .range([ 0, width1 ]);
        var xAxis = d3.axisBottom(x).ticks(7).tickFormat(d3.format("d"));
        svg1.append("g").attr("class","myXaxis1")
          .attr("transform", "translate(0," + height1 + ")")
          .call(xAxis);

        var formatPercent = d3.format(".0%");

        // Add Y axis
        var y = d3.scaleLinear()
          .domain([0, d3.max(data.filter(function(d){return d.name=="World"}), function(d) { return +d.value; })])
          .range([ height1, 0 ]);
        var yAxis = d3.axisLeft().scale(y).tickFormat(formatPercent);
        svg1.append("g").attr("class","myYaxis1")
          .call(yAxis);

        var pre_line = svg1
          .append('g')
          .attr("class", "pre-line1");
        var post_line = svg1
          .append('g')
          .attr("class", "post-line1");

        // A function that update the chart
        function update(selectedCountry, selectedIndicator, selectedPPP) {

          if(selectedIndicator !== null){
            currentIndicator1 = selectedIndicator;
          };

          data = original_data.filter(function(d){return d.povtype == currentIndicator1});

          if(!currentSelection1.includes(selectedCountry) && selectedCountry !== null){
            currentSelection1.push(selectedCountry);
          };

          if(currentSelection1.length > 7){
            currentSelection1.shift()
          }

          // Update color axis
          myColor.domain(currentSelection1)

          // Create new data with the selection
          var dataFilter = data.filter(function(d){return currentSelection1.includes(d.name)})
          var dataFilter_pre = data.filter(function(d){return currentSelection1.includes(d.name) && d.covid=="FALSE"})
          var dataFilter_post = data.filter(function(d){return currentSelection1.includes(d.name) && d.covid=="TRUE"})

          svg1.selectAll('path.country_line1').remove();
          svg1.selectAll('g.legend_item_icon1').remove();
          svg1.selectAll('g.legend_item_text1').remove();
          legend
            .selectAll('g.legend_item_icon1')
            .data(currentSelection1)
            .enter()
            .append("g")
            .attr("class", "legend_item_icon1")
            .on("click", function(d) {
              if(currentSelection1.length > 1){
                var selectedIndex = currentSelection1.indexOf(d);
                if(selectedIndex > -1){
                  currentSelection1.splice(selectedIndex, 1);
                };
                update(null, null, null);
              };

            })
            .append("rect")
            .attr("x", width1 + 10)
            .attr("y", function(d,i){ return 90 + i*15 - (10/2) })
            .attr("width", 10)
            .attr("height", 10)
            .style("fill", function(d){ return myColor(d)})
            .style("cursor", "pointer");
          legend
            .selectAll('g.legend_item_text1')
            .data(currentSelection1)
            .enter()
            .append("g")
            .attr("class", "legend_item_text1")
            .on("click", function(d) {
              if(currentSelection1.length > 1){
                var selectedIndex = currentSelection1.indexOf(d);
                if(selectedIndex > -1){
                  currentSelection1.splice(selectedIndex, 1);
                };
                update(null, null, null);
              };

            })
            .append("text")
            .attr("x", width1 + 22)
            .attr("y", function(d,i){ return 90 + i*15})
            .style("fill", function(d){ return myColor(d)})
            .style("cursor", "pointer")
            .text(function(d){ return d })
            .attr("text-anchor", "left")
            .style("alignment-baseline", "middle")
            .style("font-size", "10px");


          for(var i = 0; i < currentSelection1.length; i++){
            selected_country = currentSelection1[i];
            pre_line
              .append("path")
              .attr("class", "country_line1")
                .datum(data.filter(function(d){return d.name==selected_country && d.covid=="FALSE"}))
                .attr("d", d3.line()
                  .x(function(d) { return x(d.year) })
                  .y(function(d) { return y(+d.value) })
                )
                .attr("stroke", function(d){ return myColor(selected_country) })
                .style("stroke-width", 2)
                .style("fill", "none")
                .style("stroke-dasharray", "3, 3");
            pre_line
            .append("path")
            .attr("class", "country_line1")
              .datum(data.filter(function(d){return d.name==selected_country && d.covid=="FALSE" && d.estimate=="FALSE"}))
              .attr("d", d3.line()
                .x(function(d) { return x(d.year) })
                .y(function(d) { return y(+d.value) })
              )
              .attr("stroke", function(d){ return myColor(selected_country) })
              .style("stroke-width", 2)
              .style("fill", "none");

            post_line
              .append("path")
              .attr("class", "country_line1")
                .datum(data.filter(function(d){return d.name==selected_country && d.covid=="TRUE"}))
                .attr("d", d3.line()
                  .x(function(d) { return x(d.year) })
                  .y(function(d) { return y(+d.value) })
                )
                .attr("stroke", function(d){ return d3.rgb(myColor(selected_country)).darker() })
                .style("stroke-width", 2)
                .style("fill", "none")
                .style("stroke-dasharray", "3, 3");
            post_line
              .append("path")
              .attr("class", "country_line1")
                .datum(data.filter(function(d){return d.name==selected_country && d.covid=="TRUE" && d.estimate=="FALSE"}))
                .attr("d", d3.line()
                  .x(function(d) { return x(d.year) })
                  .y(function(d) { return y(+d.value) })
                )
                .attr("stroke", function(d){ return d3.rgb(myColor(selected_country)).darker() })
                .style("stroke-width", 2)
                .style("fill", "none");
          };

          // Adjust X axis
          x.domain(d3.extent(data, function(d) { return d.year; }));
          svg1.selectAll(".myXaxis1")
          .transition()
          .duration(1000)
          .call(xAxis);
          // Adjust y axis
          var ymax = d3.max(data.filter(function(d){return currentSelection1.includes(d.name)}), function(d) { return +d.value; });
          if(ymax < 0.01){
            formatPercent = d3.format(".2%");
          }else if(ymax < 0.1){
            formatPercent = d3.format(".1%");
          }else{
            formatPercent = d3.format(".0%");
          };
          yAxis.tickFormat(formatPercent);
          y.domain([0, d3.max(data.filter(function(d){return currentSelection1.includes(d.name)}), function(d) { return +d.value; })]);
          svg1.selectAll(".myYaxis1")
          .transition()
          .duration(1000)
          .call(yAxis);

          svg1.selectAll('path.country_line1')
          .transition()
          .duration(1000)
          .attr("d", d3.line()
            .x(function(d) { return x(d.year) })
            .y(function(d) { return y(+d.value) })
          )
        }

        // When the button is changed, run the updateChart function
        d3.select("#countrySelectCovid1").on("change", function(d) {
            // recover the option that has been chosen
            var selectedOption = d3.select(this).property("value");
            // run the updateChart function with this selected option
            update(selectedOption, null, null);
        });
        d3.select("#indicatorSelectCovid1").on("change", function(d) {
            // recover the option that has been chosen
            var selectedOption = d3.select(this).property("value");
            // run the updateChart function with this selected option
            update(null, selectedOption, null);
        });



        var legend = svg1
          .append("g");

        legend
          .append("rect")
          .attr("x", width1)
          .attr("y", 0)
          .attr("width", margin1.right)
          .attr("height", height1 + margin1.bottom - 30)
          .attr("fill", "white")

        legend
          .append("text")
          .attr("x", width1)
          .attr("y", 0)
          .style("fill", "black")
          .style("font-weight", "bold")
          .style("font-size", "12px")
          .text("Legend")

        var static_legend_items = [
          {"name": "Measured poverty %", "color": d3.rgb("#e84439"), "dasharray": "0"},
          {"name": "Poverty % estimate before COVID-19", "color": d3.rgb("#e84439"), "dasharray": "3, 3"},
          {"name": "Poverty % estimate after COVID-19", "color": d3.rgb("#e84439").darker(), "dasharray": "3, 3"},
        ]

        legend
          .selectAll('g.static_legend_lines1')
          .data(static_legend_items)
          .enter()
          .append("g")
          .attr("class", "static_legend_lines1")
          .append("path")
          .attr("d", function(d, i){return "m " + width1 + " " + (20 + i*15) + " H " + (width1 + 20) })
          .attr("stroke", function(d){ return d.color })
          .style("stroke-width", 2)
          .style("fill", "none")
          .style("stroke-dasharray", function(d){ return d.dasharray });

        legend
          .selectAll('g.static_legend_text1')
          .data(static_legend_items)
          .enter()
          .append("g")
          .attr("class", "static_legend_text1")
          .append("text")
          .attr("x", width1 + 22)
          .attr("y", function(d,i){ return 20 + i*15})
          .style("fill", function(d){ return d.color})
          .text(function(d){ return d.name })
          .attr("text-anchor", "left")
          .style("alignment-baseline", "middle")
          .style("font-size", "10px");

        legend
          .append("text")
          .attr("x", width1)
          .attr("y", 75)
          .style("fill", "black")
          .style("font-size", "10px")
          .text("Selected regions/countries (up to 7, click to remove)")

        update("World", "Extreme poverty", "2011");

    })

    // end chart 1
    // start chart 2

    var selected_indicator2 = "nominal";

    // set the dimensions and margins of the graph
    var margin2 = {top: 10, right: 320, bottom: 30, left: 60},
        width2 = 800 - margin2.left - margin2.right,
        height2 = 300 - margin2.top - margin2.bottom;

    // append the svg object to the body of the page
    var svg2 = d3.select("#covid-chart2")
      .append("svg")
        .attr('preserveAspectRatio', 'xMinYMin meet')
        .attr("viewBox", "0 0 " + (width2 + margin2.left + margin2.right) + " " + (height2 + margin2.top + margin2.bottom))
        .attr("style","background-color: white;")
      .append("g")
        .attr("transform",
              "translate(" + margin2.left + "," + margin2.top + ")");


    //Read the data
    d3.csv("../covid-proj-np20/covid_proj.csv", function(data) {

        var allCountries = d3.map(data, function(d){return(d.name)}).keys();
        var allPovs = d3.map(data, function(d){return(d.povtype)}).keys();

        // add the options to the button
        d3.select("#countrySelectCovid2")
          .selectAll('myOptions')
         	.data(allCountries)
          .enter()
        	.append('option')
          .text(function (d) { return d; }) // text showed in the menu
          .attr("value", function (d) { return d; }) // corresponding value returned by the buttons

        // A color scale: one color for each group
        var myColor = d3.scaleOrdinal()
          .domain(["National P20", "National P80"])
          .range(["#e84439", "#0089cc"]);

        // Add X axis
        var x = d3.scaleLinear()
          .domain(d3.extent(data, function(d) { return d.year; }))
          .range([ 0, width2 ]);
        var xAxis = d3.axisBottom(x).ticks(7).tickFormat(d3.format("d"));
        svg2.append("g").attr("class","myXaxis2")
          .attr("transform", "translate(0," + height2 + ")")
          .call(xAxis);

        var formatDollar = d3.format("$,.2f");

        // Add Y axis
        var y = d3.scaleLinear()
          .domain([0, d3.max(data.filter(function(d){return d.name=="Albania"}), function(d) { return +d.value; })])
          .range([ height2, 0 ]);
        var yAxis = d3.axisLeft().scale(y).tickFormat(formatDollar);
        svg2.append("g").attr("class","myYaxis2")
          .call(yAxis);

        var pre_line = svg2
          .append('g')
          .attr("class", "pre-p20-line2");
        var post_line = svg2
          .append('g')
          .attr("class", "post-p20-line2");

        // A function that update the chart
        function update(selectedCountry, selectedIndicator) {

          svg2.selectAll('path.country_line2').remove();
          svg2.selectAll('g.legend_item_icon2').remove();
          svg2.selectAll('g.legend_item_text2').remove();
          var country_dat = data.map(function(obj) {
              return Object.assign({}, obj);
          });
          country_dat = country_dat.filter(function(d){return d.name==selectedCountry});

          for(var i = 0; i < allPovs.length; i++){
            selected_pov = allPovs[i];
            var poverty_dat = country_dat.filter(function(d){return d.povtype==selected_pov});
            if(selectedIndicator == "percent"){
              var year_min = d3.min(poverty_dat,function(d){return d.year});
              var baseline = poverty_dat.filter(function(d){return d.year==year_min})[0].value;
              poverty_dat.forEach(function(d,i,dat){dat[i].value = d.value/baseline; });
            };
            pre_line
              .append("path")
              .attr("class", "country_line2")
                .datum(poverty_dat.filter(function(d){return d.covid=="FALSE"}))
                .attr("d", d3.line()
                  .x(function(d) { return x(d.year) })
                  .y(function(d) { return y(+d.value) })
                )
                .attr("stroke", function(d){ return myColor(selected_pov) })
                .style("stroke-width", 2)
                .style("fill", "none")
                .style("stroke-dasharray", "3, 3");
            pre_line
            .append("path")
            .attr("class", "country_line2")
              .datum(poverty_dat.filter(function(d){return d.covid=="FALSE" && d.estimate=="FALSE"}))
              .attr("d", d3.line()
                .x(function(d) { return x(d.year) })
                .y(function(d) { return y(+d.value) })
              )
              .attr("stroke", function(d){ return myColor(selected_pov) })
              .style("stroke-width", 2)
              .style("fill", "none");

            post_line
              .append("path")
              .attr("class", "country_line2")
                .datum(poverty_dat.filter(function(d){return d.covid=="TRUE"}))
                .attr("d", d3.line()
                  .x(function(d) { return x(d.year) })
                  .y(function(d) { return y(+d.value) })
                )
                .attr("stroke", function(d){ return d3.rgb(myColor(selected_pov)).darker() })
                .style("stroke-width", 2)
                .style("fill", "none")
                .style("stroke-dasharray", "3, 3");
            post_line
              .append("path")
              .attr("class", "country_line2")
                .datum(poverty_dat.filter(function(d){return d.covid=="TRUE" && d.estimate=="FALSE"}))
                .attr("d", d3.line()
                  .x(function(d) { return x(d.year) })
                  .y(function(d) { return y(+d.value) })
                )
                .attr("stroke", function(d){ return d3.rgb(myColor(selected_pov)).darker() })
                .style("stroke-width", 2)
                .style("fill", "none");
          };

          // Adjust X axis
          x.domain(d3.extent(country_dat, function(d) { return d.year; }));
          svg2.selectAll(".myXaxis2")
          .transition()
          .duration(1000)
          .call(xAxis);
          // Adjust y axis
          if(selectedIndicator == "percent"){
            var ymax = d3.max(country_dat, function(d) { return +d.value; });
            if(ymax < 0.01){
              formatPercent = d3.format(".2%");
            }else if(ymax < 0.1){
              formatPercent = d3.format(".1%");
            }else{
              formatPercent = d3.format(".0%");
            };
            yAxis.tickFormat(formatPercent);
          }else{
            yAxis.tickFormat(formatDollar);
          }
          y.domain([0, d3.max(country_dat, function(d) { return +d.value; })]);
          svg2.selectAll(".myYaxis2")
          .transition()
          .duration(1000)
          .call(yAxis);

          svg2.selectAll('path.country_line2')
          .transition()
          .duration(1000)
          .attr("d", d3.line()
            .x(function(d) { return x(d.year) })
            .y(function(d) { return y(+d.value) })
          )
        }

        // When the button is changed, run the updateChart function
        d3.select("#countrySelectCovid2").on("change", function(d) {
            // recover the option that has been chosen
            var selectedOption = d3.select(this).property("value");
            // run the updateChart function with this selected option
            update(selectedOption, selected_indicator2);
        });
        d3.select("#indicatorSelectCovid2").on("change", function(d) {
            // recover the option that has been chosen
            var selectedOption = d3.select("#countrySelectCovid2").property("value");
            selected_indicator2 = d3.select(this).property("value");
            // run the updateChart function with this selected option
            update(selectedOption, selected_indicator2);
        });

        var legend = svg2
          .append("g");

        legend
          .append("rect")
          .attr("x", width2)
          .attr("y", 0)
          .attr("width", margin2.right)
          .attr("height", height2 + margin2.bottom - 30)
          .attr("fill", "white")

        legend
          .append("text")
          .attr("x", width2)
          .attr("y", 0)
          .style("fill", "black")
          .style("font-weight", "bold")
          .style("font-size", "12px")
          .text("Legend")

        var static_legend_items = [
          {"name": "National P80 measured income", "color": myColor("National P80"), "dasharray": "0"},
          {"name": "National P80 income estimate before COVID-19", "color": myColor("National P80"), "dasharray": "3, 3"},
          {"name": "National P80 income estimate after COVID-19", "color": d3.rgb(myColor("National P80")).darker().darker(), "dasharray": "3, 3"},
          {"name": "National P20 measured income", "color": myColor("National P20"), "dasharray": "0"},
          {"name": "National P20 income estimate before COVID-19", "color": myColor("National P20"), "dasharray": "3, 3"},
          {"name": "National P20 income estimate after COVID-19", "color": d3.rgb(myColor("National P20")).darker().darker(), "dasharray": "3, 3"},
        ]

        legend
          .selectAll('g.static_legend_lines2')
          .data(static_legend_items)
          .enter()
          .append("g")
          .attr("class", "static_legend_lines2")
          .append("path")
          .attr("d", function(d, i){return "m " + width2 + " " + (20 + i*15) + " H " + (width2 + 20) })
          .attr("stroke", function(d){ return d.color })
          .style("stroke-width", 2)
          .style("fill", "none")
          .style("stroke-dasharray", function(d){ return d.dasharray });

        legend
          .selectAll('g.static_legend_text2')
          .data(static_legend_items)
          .enter()
          .append("g")
          .attr("class", "static_legend_text2")
          .append("text")
          .attr("x", width2 + 22)
          .attr("y", function(d,i){ return 20 + i*15})
          .style("fill", function(d){ return d.color})
          .text(function(d){ return d.name })
          .attr("text-anchor", "left")
          .style("alignment-baseline", "middle")
          .style("font-size", "10px");

        update("Albania", selected_indicator2);

    })
    // end chart 2
    // start chart 3

    var selected_country3 = "";
    var selected_indicator3 = "";
    var selected_demographic_category3 = "";

    // set the dimensions and margins of the graph
    var margin3 = {top: 10, right: 150, bottom: 30, left: 60},
        width3 = 800 - margin3.left - margin3.right,
        height3 = 300 - margin3.top - margin3.bottom;

    // append the svg object to the body of the page
    var svg3 = d3.select("#covid-chart3")
      .append("svg")
        .attr('preserveAspectRatio', 'xMinYMin meet')
        .attr("viewBox", "0 0 " + (width3 + margin3.left + margin3.right) + " " + (height3 + margin3.top + margin3.bottom))
        .attr("style", "background-color: white;")
      .append("g")
        .attr("transform",
              "translate(" + margin3.left + "," + margin3.top + ")");

    var legend = svg3
      .append("g");

    legend
      .append("rect")
      .attr("x", width3)
      .attr("y", 0)
      .attr("width", margin3.right)
      .attr("height", height3 + margin3.bottom - 30)
      .attr("fill", "white")

    legend
      .append("text")
      .attr("x", width3)
      .attr("y", 0)
      .style("fill", "black")
      .style("font-weight", "bold")
      .style("font-size", "12px")
      .text("Legend")


    //Read the data
    d3.csv("../survey-vis/all_survey.csv", function(data) {

        var allCountries = d3.map(data, function(d){return(d.name)}).keys();
        var allIndicators = d3.map(data, function(d){return(d.indicator)}).keys();
        var allDemographicCategories = d3.map(data, function(d){return(d.demographic_category)}).keys();

        d3.select("#countrySelectCovid3")
          .selectAll('myOptions')
         	.data(allCountries)
          .enter()
        	.append('option')
          .text(function (d) { return d; })
          .attr("value", function (d) { return d; });
        d3.select("#indicatorSelectCovid3")
          .selectAll('myOptions')
         	.data(allIndicators)
          .enter()
        	.append('option')
          .text(function (d) { return d; })
          .attr("value", function (d) { return d; });
        d3.select("#demographicSelectCovid3")
          .selectAll('myOptions')
         	.data(allDemographicCategories)
          .enter()
        	.append('option')
          .text(function (d) { return d; })
          .attr("value", function (d) { return d; });

        // A color scale: one color for each group
        var myColor = d3.scaleOrdinal()
          .range(["#e84439", "#f49b21", "#893f90", "#109e68"]);

        // Add X axis
        var x = d3.scaleLinear()
          .domain(d3.extent(data, function(d) { return d.year; }))
          .range([ 0, width3 ]);
        var xAxis = d3.axisBottom(x).ticks(7).tickFormat(d3.format("d"));
        svg3.append("g").attr("class","myXaxis3")
          .attr("transform", "translate(0," + height3 + ")")
          .call(xAxis);

        var formatPercent = d3.format(".0%");

        // Add Y axis
        var y = d3.scaleLinear()
          .domain([0, d3.max(data.filter(function(d){return allCountries[0]}), function(d) { return +d.value; })])
          .range([ height3, 0 ]);
        var yAxis = d3.axisLeft().scale(y).tickFormat(formatPercent);
        svg3.append("g").attr("class","myYaxis3")
          .call(yAxis);

        var lines = svg3
          .append('g')
          .attr("class", "lines3");

        // A function that update the chart
        function update(selectedCountry, selectedIndicator, selectedDemographicCategory) {
          if(selectedCountry !== null){
            selected_country3 = selectedCountry;
          }
          if(selectedIndicator !== null){
            selected_indicator3 = selectedIndicator;
          }
          if(selectedDemographicCategory !== null){
            selected_demographic_category3 = selectedDemographicCategory;
          }

          svg3.selectAll('path.country_line3').remove();
          svg3.selectAll('g.legend_lines3').remove();
          svg3.selectAll('g.legend_text3').remove();

          var country_dat = data.filter(function(d){return d.name==selected_country3 && d.indicator==selected_indicator3 &&  d.demographic_category==selected_demographic_category3});
          var allDemographics = d3.map(country_dat, function(d){return(d.demographic)}).keys();

          myColor.domain(allDemographics);

          legend
            .selectAll('g.legend_lines3')
            .data(allDemographics)
            .enter()
            .append("g")
            .attr("class", "legend_lines3")
            .append("path")
            .attr("d", function(d, i){return "m " + width3 + " " + (20 + i*15) + " H " + (width3 + 20) })
            .attr("stroke", function(d){ return myColor(d) })
            .style("stroke-width", 2)
            .style("fill", "none");

          legend
            .selectAll('g.legend_text3')
            .data(allDemographics)
            .enter()
            .append("g")
            .attr("class", "legend_text3")
            .append("text")
            .attr("x", width3 + 22)
            .attr("y", function(d,i){ return 20 + i*15})
            .style("fill", function(d){ return myColor(d)})
            .text(function(d){ return d })
            .attr("text-anchor", "left")
            .style("alignment-baseline", "middle")
            .style("font-size", "10px");

          for(var i = 0; i < allDemographics.length; i++){
            var demographic = allDemographics[i];
            var demographic_dat = country_dat.filter(function(d){return d.demographic==demographic});
            lines
              .append("path")
              .attr("class", "country_line3")
                .datum(demographic_dat)
                .attr("d", d3.line()
                  .x(function(d) { return x(d.year) })
                  .y(function(d) { return y(+d.value) })
                )
                .attr("stroke", function(d){ return myColor(demographic) })
                .style("stroke-width", 2)
                .style("fill", "none");
          };

          // Adjust X axis
          x.domain(d3.extent(country_dat, function(d) { return d.year; }));
          svg3.selectAll(".myXaxis3")
          .transition()
          .duration(1000)
          .call(xAxis);
          // Adjust y axis
          var ymax = d3.max(country_dat, function(d) { return +d.value; });
          if(ymax < 0.01){
            formatPercent = d3.format(".2%");
          }else if(ymax < 0.1){
            formatPercent = d3.format(".1%");
          }else{
            formatPercent = d3.format(".0%");
          };
          yAxis.tickFormat(formatPercent);
          y.domain([0, d3.max(country_dat, function(d) { return +d.value; })]);
          svg3.selectAll(".myYaxis3")
          .transition()
          .duration(1000)
          .call(yAxis);

          svg3.selectAll('path.country_line3')
          .transition()
          .duration(1000)
          .attr("d", d3.line()
            .x(function(d) { return x(d.year) })
            .y(function(d) { return y(+d.value) })
          )
        }

        // When the button is changed, run the updateChart function
        d3.select("#countrySelectCovid3").on("change", function(d) {
            // recover the option that has been chosen
            var selectedOption = d3.select(this).property("value");
            // run the updateChart function with this selected option
            update(selectedOption, selected_indicator3, selected_demographic_category3);
        });
        d3.select("#indicatorSelectCovid3").on("change", function(d) {
            // recover the option that has been chosen
            var selectedOption = d3.select(this).property("value");
            // run the updateChart function with this selected option
            update(selected_country3, selectedOption, selected_demographic_category3);
        });
        d3.select("#demographicSelectCovid3").on("change", function(d) {
            // recover the option that has been chosen
            var selectedOption = d3.select(this).property("value");
            // run the updateChart function with this selected option
            update(selected_country3, selected_indicator3, selectedOption);
        });

        update(allCountries[0], allIndicators[0], allDemographicCategories[0]);

    })

    // end chart 3


    </script>

    </main>




<footer role="contentinfo" class="footer">
	<div class="row">
		<div class="l-footer">
			<div class="l-footer__col">


        <h4 class="footer__title">Sign up for our newsletter to receive regular news and updates</h4>
        <a href="https://us11.list-manage.com/subscribe?u=a829237ca0cf1470615c7f059&amp;id=ce30e2af0f" class="button">Subscribe here</a>



			</div>




        <div class="l-footer__col">
            <h4 class="footer__title">Get around</h4>


                <ul class="footer__list">

                        <li><a href="https://devinit.org/who-we-are/?nav=footer">Who we are</a></li>

                        <li><a href="https://devinit.org/what-we-do/?nav=footer">What we do</a></li>

                        <li><a href="https://devinit.org/how-we-work/?nav=footer">How we work</a></li>

                        <li><a href="https://devinit.org/resources/?nav=footer">Resources</a></li>

                        <li><a href="https://devinit.org/data/?nav=footer">Data</a></li>

                        <li><a href="https://devinit.org/blog/?nav=footer">Blog</a></li>

                        <li><a href="https://devinit.org/work-for-us/?nav=footer">Work for us</a></li>



                </ul>



        </div>

        <div class="l-footer__col">
            <h4 class="footer__title">Get in touch</h4>


                <ul class="footer__list">




                            <li><a href="https://devinit.org/contact-us/?nav=footer">Contact us</a></li>



                            <li><a href="https://devinit.org/media-centre/?nav=footer">Media centre</a></li>


                </ul>



        </div>

        <div class="l-footer__col">
            <h4 class="footer__title">Policies and statements</h4>


                <ul class="footer__list">




                            <li><a href="http://devinit.org/documents/664/Modern_slavery_and_human_trafficking_statement.pdf?nav=footer">Modern slavery and human trafficking statement</a></li>



                            <li><a href="http://devinit.org/documents/666/Privacy_and_cookie_policy.pdf?nav=footer">GDPR and Privacy notice</a></li>



                            <li><a href="http://devinit.org/documents/663/Responsible_employer_and_business_ethics_statement.pdf?nav=footer">Responsible employer and business ethics statement</a></li>



                            <li><a href="https://devinit.org/documents/811/Income_Acceptance_Policy.pdf?nav=footer">Income acceptance policy</a></li>


                </ul>



        </div>



		</div>


<div class="footer__meta">
  <div class="footer__meta-copy footer__meta-copy--major"><div class="rich-text"><p>Content produced by Development Initiatives is licensed under a <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution BY-NC-ND 4.0 International license</a>, unless stated otherwise on an image or page.</p></div></div>
    <div class="footer__meta-copy"><div class="rich-text"><p>Development Initiatives is the trading name of Development Initiatives Poverty Research Ltd, registered in England and Wales, Company No. 06368740; DI International Ltd, registered in England and Wales, Company No. 5802543, Registered Address: North Quay House, Quay Side, Temple Back, Bristol, BS1 6FL, UK; and Development Initiatives Poverty Research America Inc. (a 501(C)3 company registered in the state of Delaware with the registration number 5737757), Registered Address: 1209 Orange Street, Wilmington, New Castle County, Delaware 19801.</p></div></div>
</div>

	</div>
</footer>


  </div>



<script src="https://devinit.org/assets/js/app.bundle.69790ff789ef.js"></script>







</body></html>
